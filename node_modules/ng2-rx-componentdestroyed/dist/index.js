"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var rxjs_1 = require("rxjs");
var operators_1 = require("rxjs/operators");
function componentDestroyed(component) {
    if (component.__componentDestroyed$) {
        return component.__componentDestroyed$;
    }
    var oldNgOnDestroy = component.ngOnDestroy;
    var stop$ = new rxjs_1.ReplaySubject();
    component.ngOnDestroy = function () {
        oldNgOnDestroy && oldNgOnDestroy.apply(component);
        stop$.next(true);
        stop$.complete();
    };
    return component.__componentDestroyed$ = stop$.asObservable();
}
exports.componentDestroyed = componentDestroyed;
function untilComponentDestroyed(component) {
    return function (source) { return source.pipe(operators_1.takeUntil(componentDestroyed(component))); };
}
exports.untilComponentDestroyed = untilComponentDestroyed;
